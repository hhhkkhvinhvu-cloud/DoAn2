CCS PCM C Compiler, Version 5.109, 43599               23-Dec-25 21:26

               Filename:   D:\DA2\test.lst

               ROM used:   824 words (10%)
                           Largest free fragment is 2048
               RAM used:   35 (10%) at main() level
                           46 (12%) worst case
               Stack used: 2 locations (0 in main + 2 for interrupts)
               Stack size: 8

*
0000:  MOVLW  02
0001:  MOVWF  0A
0002:  GOTO   286
0003:  NOP
0004:  MOVWF  7F
0005:  SWAPF  03,W
0006:  CLRF   03
0007:  MOVWF  21
0008:  MOVF   0A,W
0009:  MOVWF  20
000A:  CLRF   0A
000B:  MOVF   04,W
000C:  MOVWF  22
000D:  MOVF   77,W
000E:  MOVWF  23
000F:  MOVF   78,W
0010:  MOVWF  24
0011:  MOVF   79,W
0012:  MOVWF  25
0013:  MOVF   7A,W
0014:  MOVWF  26
0015:  BCF    03.7
0016:  BCF    03.5
0017:  BTFSS  0B.3
0018:  GOTO   01B
0019:  BTFSC  0B.0
001A:  GOTO   032
001B:  MOVLW  8C
001C:  MOVWF  04
001D:  BTFSS  00.0
001E:  GOTO   021
001F:  BTFSC  0C.0
0020:  GOTO   035
0021:  MOVF   22,W
0022:  MOVWF  04
0023:  MOVF   23,W
0024:  MOVWF  77
0025:  MOVF   24,W
0026:  MOVWF  78
0027:  MOVF   25,W
0028:  MOVWF  79
0029:  MOVF   26,W
002A:  MOVWF  7A
002B:  MOVF   20,W
002C:  MOVWF  0A
002D:  SWAPF  21,W
002E:  MOVWF  03
002F:  SWAPF  7F,F
0030:  SWAPF  7F,W
0031:  RETFIE
0032:  BCF    0A.3
0033:  BCF    0A.4
0034:  GOTO   1B9
0035:  BCF    0A.3
0036:  BCF    0A.4
0037:  GOTO   04D
.................... #include <16f877a.h>
.................... //////////// Standard Header file for the PIC16F877A device ////////////////
.................... ///////////////////////////////////////////////////////////////////////////
.................... ////        (C) Copyright 1996, 2020 Custom Computer Services          ////
.................... //// This source code may only be used by licensed users of the CCS C  ////
.................... //// compiler.  This source code may only be distributed to other      ////
.................... //// licensed users of the CCS C compiler.  No other use, reproduction ////
.................... //// or distribution is permitted without written permission.          ////
.................... //// Derivative programs created using this software in object code    ////
.................... //// form are not restricted in any way.                               ////
.................... ///////////////////////////////////////////////////////////////////////////
.................... #device PIC16F877A
0038:  MOVF   45,W
0039:  CLRF   78
003A:  SUBWF  44,W
003B:  BTFSC  03.0
003C:  GOTO   040
003D:  MOVF   44,W
003E:  MOVWF  77
003F:  GOTO   04C
0040:  CLRF   77
0041:  MOVLW  08
0042:  MOVWF  46
0043:  RLF    44,F
0044:  RLF    77,F
0045:  MOVF   45,W
0046:  SUBWF  77,W
0047:  BTFSC  03.0
0048:  MOVWF  77
0049:  RLF    78,F
004A:  DECFSZ 46,F
004B:  GOTO   043
004C:  RETURN
*
00CE:  CLRF   78
00CF:  CLRF   79
00D0:  CLRF   77
00D1:  CLRF   7A
00D2:  MOVF   47,W
00D3:  BTFSS  03.2
00D4:  GOTO   0D8
00D5:  MOVF   46,W
00D6:  BTFSC  03.2
00D7:  GOTO   0F2
00D8:  MOVLW  10
00D9:  MOVWF  48
00DA:  BCF    03.0
00DB:  RLF    44,F
00DC:  RLF    45,F
00DD:  RLF    77,F
00DE:  RLF    7A,F
00DF:  MOVF   47,W
00E0:  SUBWF  7A,W
00E1:  BTFSS  03.2
00E2:  GOTO   0E5
00E3:  MOVF   46,W
00E4:  SUBWF  77,W
00E5:  BTFSS  03.0
00E6:  GOTO   0EE
00E7:  MOVF   46,W
00E8:  SUBWF  77,F
00E9:  BTFSS  03.0
00EA:  DECF   7A,F
00EB:  MOVF   47,W
00EC:  SUBWF  7A,F
00ED:  BSF    03.0
00EE:  RLF    78,F
00EF:  RLF    79,F
00F0:  DECFSZ 48,F
00F1:  GOTO   0DA
*
01B1:  BSF    0A.0
01B2:  BCF    0A.1
01B3:  BCF    0A.2
01B4:  ADDWF  02,F
01B5:  GOTO   06C
01B6:  GOTO   081
01B7:  GOTO   096
01B8:  GOTO   0AB
*
021F:  CLRF   77
0220:  CLRF   78
0221:  MOVF   42,W
0222:  BCF    03.0
0223:  BTFSC  43.0
0224:  ADDWF  77,F
0225:  RRF    77,F
0226:  RRF    78,F
0227:  BTFSC  43.1
0228:  ADDWF  77,F
0229:  RRF    77,F
022A:  RRF    78,F
022B:  BTFSC  43.2
022C:  ADDWF  77,F
022D:  RRF    77,F
022E:  RRF    78,F
022F:  BTFSC  43.3
0230:  ADDWF  77,F
0231:  RRF    77,F
0232:  RRF    78,F
0233:  BTFSC  43.4
0234:  ADDWF  77,F
0235:  RRF    77,F
0236:  RRF    78,F
0237:  BTFSC  43.5
0238:  ADDWF  77,F
0239:  RRF    77,F
023A:  RRF    78,F
023B:  BTFSC  43.6
023C:  ADDWF  77,F
023D:  RRF    77,F
023E:  RRF    78,F
023F:  BTFSC  43.7
0240:  ADDWF  77,F
0241:  RRF    77,F
0242:  RRF    78,F
.................... 
.................... #list
.................... 
.................... #use delay(crystal=20000000)
.................... 
.................... // Cau hinh I2C
.................... #use i2c(Master, Fast, sda=PIN_C4, scl=PIN_C3) 
*
01F5:  BCF    14.7
01F6:  BCF    0C.3
01F7:  MOVF   3E,W
01F8:  MOVWF  13
01F9:  MOVLW  02
01FA:  BTFSC  14.7
01FB:  GOTO   203
01FC:  BSF    03.5
01FD:  BTFSC  14.2
01FE:  GOTO   1FD
01FF:  MOVLW  00
0200:  BTFSC  11.6
0201:  MOVLW  01
0202:  BCF    03.5
0203:  MOVWF  78
0204:  RETURN
0205:  BCF    14.6
0206:  BSF    03.5
0207:  BSF    11.3
0208:  BTFSC  11.3
0209:  GOTO   208
020A:  BTFSC  77.0
020B:  BCF    11.5
020C:  BTFSS  77.0
020D:  BSF    11.5
020E:  BSF    11.4
020F:  BTFSC  11.4
0210:  GOTO   20F
0211:  BCF    03.5
0212:  MOVF   13,W
0213:  MOVWF  78
0214:  RETURN
.................... 
.................... unsigned int8 code[10]={0XC0,0XF9,0XA4,0XB0,0X99,0X92,0X82,0XF8,0X80,0X90};
*
02B0:  MOVLW  C0
02B1:  BCF    03.5
02B2:  MOVWF  28
02B3:  MOVLW  F9
02B4:  MOVWF  29
02B5:  MOVLW  A4
02B6:  MOVWF  2A
02B7:  MOVLW  B0
02B8:  MOVWF  2B
02B9:  MOVLW  99
02BA:  MOVWF  2C
02BB:  MOVLW  92
02BC:  MOVWF  2D
02BD:  MOVLW  82
02BE:  MOVWF  2E
02BF:  MOVLW  F8
02C0:  MOVWF  2F
02C1:  MOVLW  80
02C2:  MOVWF  30
02C3:  MOVLW  90
02C4:  MOVWF  31
.................... 
.................... // DINH NGHIA THOI GIAN
.................... CONST INT8 RED=23, GREEN=20, YELLOW=3;
.................... CONST INT8 RED2=60, GREEN2=57, YELLOW2=3;
.................... 
.................... // BIEN TOAN CUC
.................... INT8 I1=0, I2=0; 
.................... // --- SU DUNG INT16 DE KHONG BI TRAN SO KHI DEM DEN 400 ---
.................... UNSIGNED INT16 COUNT_TICK=0; 
.................... // ---------------------------------------------------------
.................... UNSIGNED INT8 mode=0; 
.................... UNSIGNED INT8 COUNTDOWN=0, COUNTDOWN2=0;
.................... int1 update_time_flag = 0; 
.................... int1 blink_state = 0;      
.................... unsigned int8 scan_idx = 0; 
.................... 
.................... // BIEN RTC
.................... int1 che_do_tu_dong = 1; 
.................... unsigned int8 rtc_sec, rtc_min, rtc_hour;
.................... 
.................... unsigned int8 bcd_to_decimal(unsigned int8 bcd) {
....................    return ((bcd >> 4) * 10) + (bcd & 0x0F);
*
0215:  SWAPF  3F,W
0216:  MOVWF  77
0217:  MOVLW  0F
0218:  ANDWF  77,F
0219:  MOVF   77,W
021A:  MOVWF  41
021B:  MOVF   41,W
021C:  MOVWF  42
021D:  MOVLW  0A
021E:  MOVWF  43
*
0243:  MOVF   78,W
0244:  MOVWF  40
0245:  MOVF   3F,W
0246:  ANDLW  0F
0247:  ADDWF  78,W
0248:  MOVWF  78
0249:  RETURN
.................... }
.................... 
.................... // DOC RTC 
.................... void DOC_THOIGIAN() {
....................    output_float(PIN_C3); output_float(PIN_C4); // Reset bus I2C ao
024A:  BSF    27.3
024B:  MOVF   27,W
024C:  BSF    03.5
024D:  MOVWF  07
024E:  BCF    03.5
024F:  BSF    27.4
0250:  MOVF   27,W
0251:  BSF    03.5
0252:  MOVWF  07
....................    
....................    i2c_start();
0253:  BSF    11.0
0254:  BTFSC  11.0
0255:  GOTO   254
....................    i2c_write(0xD0);
0256:  MOVLW  D0
0257:  BCF    03.5
0258:  MOVWF  3E
0259:  CALL   1F5
....................    i2c_write(0x00);
025A:  CLRF   3E
025B:  CALL   1F5
....................    i2c_start();
025C:  BSF    03.5
025D:  BSF    11.1
025E:  BTFSC  11.1
025F:  GOTO   25E
....................    i2c_write(0xD1);
0260:  MOVLW  D1
0261:  BCF    03.5
0262:  MOVWF  3E
0263:  CALL   1F5
....................    rtc_sec = bcd_to_decimal(i2c_read(1));
0264:  MOVLW  01
0265:  MOVWF  77
0266:  CALL   205
0267:  MOVF   78,W
0268:  MOVWF  3E
0269:  MOVWF  3F
026A:  CALL   215
026B:  MOVF   78,W
026C:  MOVWF  3B
....................    rtc_min = bcd_to_decimal(i2c_read(1));
026D:  MOVLW  01
026E:  MOVWF  77
026F:  CALL   205
0270:  MOVF   78,W
0271:  MOVWF  3E
0272:  MOVWF  3F
0273:  CALL   215
0274:  MOVF   78,W
0275:  MOVWF  3C
....................    rtc_hour = bcd_to_decimal(i2c_read(0));
0276:  CLRF   77
0277:  CALL   205
0278:  MOVF   78,W
0279:  MOVWF  3E
027A:  MOVWF  3F
027B:  CALL   215
027C:  MOVF   78,W
027D:  MOVWF  3D
....................    i2c_stop();
027E:  BSF    03.5
027F:  BSF    11.2
0280:  BTFSC  11.2
0281:  GOTO   280
0282:  BCF    03.5
0283:  BCF    0A.3
0284:  BCF    0A.4
0285:  GOTO   2FF (RETURN)
.................... }
.................... 
.................... // CAP NHAT TRANG THAI DEN GIAO THONG
.................... VOID CAPNHAT_DEN(){ 
....................    output_low(PIN_E0); output_low(PIN_E1); output_low(PIN_E2);
*
015D:  BSF    03.5
015E:  BCF    09.0
015F:  BCF    03.5
0160:  BCF    09.0
0161:  BSF    03.5
0162:  BCF    09.1
0163:  BCF    03.5
0164:  BCF    09.1
0165:  BSF    03.5
0166:  BCF    09.2
0167:  BCF    03.5
0168:  BCF    09.2
....................    output_low(PIN_B0); output_low(PIN_B1); output_low(PIN_B2);
0169:  BSF    03.5
016A:  BCF    06.0
016B:  BCF    03.5
016C:  BCF    06.0
016D:  BSF    03.5
016E:  BCF    06.1
016F:  BCF    03.5
0170:  BCF    06.1
0171:  BSF    03.5
0172:  BCF    06.2
0173:  BCF    03.5
0174:  BCF    06.2
.................... 
....................    if(mode == 2) { // Che do dem
0175:  MOVF   36,W
0176:  SUBLW  02
0177:  BTFSS  03.2
0178:  GOTO   184
....................       if(blink_state) { output_high(PIN_E1); output_high(PIN_B1); }
0179:  BTFSS  39.1
017A:  GOTO   183
017B:  BSF    03.5
017C:  BCF    09.1
017D:  BCF    03.5
017E:  BSF    09.1
017F:  BSF    03.5
0180:  BCF    06.1
0181:  BCF    03.5
0182:  BSF    06.1
....................       return;
0183:  GOTO   1AD
....................    }
.................... 
....................    // Cum 1 (E0-E2)
....................    if(I1 == 0) output_high(PIN_E0);      
0184:  MOVF   32,F
0185:  BTFSS  03.2
0186:  GOTO   18C
0187:  BSF    03.5
0188:  BCF    09.0
0189:  BCF    03.5
018A:  BSF    09.0
018B:  GOTO   197
....................    else if(I1 == 1) output_high(PIN_E1); 
018C:  DECFSZ 32,W
018D:  GOTO   193
018E:  BSF    03.5
018F:  BCF    09.1
0190:  BCF    03.5
0191:  BSF    09.1
0192:  GOTO   197
....................    else output_high(PIN_E2);             
0193:  BSF    03.5
0194:  BCF    09.2
0195:  BCF    03.5
0196:  BSF    09.2
.................... 
....................    // Cum 2 (B0-B2)
....................    if(I2 == 3) output_high(PIN_B0);      
0197:  MOVF   33,W
0198:  SUBLW  03
0199:  BTFSS  03.2
019A:  GOTO   1A0
019B:  BSF    03.5
019C:  BCF    06.0
019D:  BCF    03.5
019E:  BSF    06.0
019F:  GOTO   1AD
....................    else if(I2 == 4) output_high(PIN_B1); 
01A0:  MOVF   33,W
01A1:  SUBLW  04
01A2:  BTFSS  03.2
01A3:  GOTO   1A9
01A4:  BSF    03.5
01A5:  BCF    06.1
01A6:  BCF    03.5
01A7:  BSF    06.1
01A8:  GOTO   1AD
....................    else output_high(PIN_B2);             
01A9:  BSF    03.5
01AA:  BCF    06.2
01AB:  BCF    03.5
01AC:  BSF    06.2
.................... }
.................... 
.................... // ================= NGAT TIMER 1 =================
.................... #INT_TIMER1
.................... VOID ISR(){
....................    // Timer set chay khoang 2.5ms
....................    set_timer1(64000); 
*
004D:  CLRF   0E
004E:  MOVLW  FA
004F:  MOVWF  0F
0050:  CLRF   0E
0051:  NOP
....................    
....................    // --- PHAN 1: QUET LED 7 DOAN ---
....................    output_low(PIN_A0); output_low(PIN_A1); output_low(PIN_A2); output_low(PIN_A3);
0052:  BSF    03.5
0053:  BCF    05.0
0054:  BCF    03.5
0055:  BCF    05.0
0056:  BSF    03.5
0057:  BCF    05.1
0058:  BCF    03.5
0059:  BCF    05.1
005A:  BSF    03.5
005B:  BCF    05.2
005C:  BCF    03.5
005D:  BCF    05.2
005E:  BSF    03.5
005F:  BCF    05.3
0060:  BCF    03.5
0061:  BCF    05.3
....................    
....................    if(mode != 2) { 
0062:  MOVF   36,W
0063:  SUBLW  02
0064:  BTFSC  03.2
0065:  GOTO   0BF
....................        switch(scan_idx) {
0066:  MOVF   3A,W
0067:  ADDLW  FC
0068:  BTFSC  03.0
0069:  GOTO   0BF
006A:  ADDLW  04
006B:  GOTO   1B1
....................            case 0: // Hang chuc den 1
....................                output_d(code[COUNTDOWN/10]); output_high(PIN_A0); 
006C:  MOVF   37,W
006D:  MOVWF  44
006E:  MOVLW  0A
006F:  MOVWF  45
0070:  CALL   038
0071:  MOVLW  28
0072:  ADDWF  78,W
0073:  MOVWF  04
0074:  BCF    03.7
0075:  MOVF   00,W
0076:  MOVWF  44
0077:  BSF    03.5
0078:  CLRF   08
0079:  BCF    03.5
007A:  MOVF   44,W
007B:  MOVWF  08
007C:  BSF    03.5
007D:  BCF    05.0
007E:  BCF    03.5
007F:  BSF    05.0
....................                break;
0080:  GOTO   0BF
....................            case 1: // Hang don vi den 1
....................                output_d(code[COUNTDOWN%10]); output_high(PIN_A1); 
0081:  MOVF   37,W
0082:  MOVWF  44
0083:  MOVLW  0A
0084:  MOVWF  45
0085:  CALL   038
0086:  MOVLW  28
0087:  ADDWF  77,W
0088:  MOVWF  04
0089:  BCF    03.7
008A:  MOVF   00,W
008B:  MOVWF  44
008C:  BSF    03.5
008D:  CLRF   08
008E:  BCF    03.5
008F:  MOVF   44,W
0090:  MOVWF  08
0091:  BSF    03.5
0092:  BCF    05.1
0093:  BCF    03.5
0094:  BSF    05.1
....................                break;
0095:  GOTO   0BF
....................            case 2: // Hang chuc den 2
....................                output_d(code[COUNTDOWN2/10]); output_high(PIN_A2); 
0096:  MOVF   38,W
0097:  MOVWF  44
0098:  MOVLW  0A
0099:  MOVWF  45
009A:  CALL   038
009B:  MOVLW  28
009C:  ADDWF  78,W
009D:  MOVWF  04
009E:  BCF    03.7
009F:  MOVF   00,W
00A0:  MOVWF  44
00A1:  BSF    03.5
00A2:  CLRF   08
00A3:  BCF    03.5
00A4:  MOVF   44,W
00A5:  MOVWF  08
00A6:  BSF    03.5
00A7:  BCF    05.2
00A8:  BCF    03.5
00A9:  BSF    05.2
....................                break;
00AA:  GOTO   0BF
....................            case 3: // Hang don vi den 2
....................                output_d(code[COUNTDOWN2%10]); output_high(PIN_A3); 
00AB:  MOVF   38,W
00AC:  MOVWF  44
00AD:  MOVLW  0A
00AE:  MOVWF  45
00AF:  CALL   038
00B0:  MOVLW  28
00B1:  ADDWF  77,W
00B2:  MOVWF  04
00B3:  BCF    03.7
00B4:  MOVF   00,W
00B5:  MOVWF  44
00B6:  BSF    03.5
00B7:  CLRF   08
00B8:  BCF    03.5
00B9:  MOVF   44,W
00BA:  MOVWF  08
00BB:  BSF    03.5
00BC:  BCF    05.3
00BD:  BCF    03.5
00BE:  BSF    05.3
....................                break;
....................        }
....................    }
....................    scan_idx++;
00BF:  INCF   3A,F
....................    if(scan_idx > 3) scan_idx = 0;
00C0:  MOVF   3A,W
00C1:  SUBLW  03
00C2:  BTFSS  03.0
00C3:  CLRF   3A
.................... 
....................    // --- PHAN 2: DEM THOI GIAN ---
....................    COUNT_TICK++; // Bay gio no la INT16, dem thoai mai len 400
00C4:  INCF   34,F
00C5:  BTFSC  03.2
00C6:  INCF   35,F
....................    
....................    // Nhap nhay den vang
....................    if(COUNT_TICK % 200 == 0) blink_state = !blink_state;
00C7:  MOVF   35,W
00C8:  MOVWF  45
00C9:  MOVF   34,W
00CA:  MOVWF  44
00CB:  CLRF   47
00CC:  MOVLW  C8
00CD:  MOVWF  46
*
00F2:  MOVF   77,W
00F3:  MOVWF  44
00F4:  MOVF   7A,W
00F5:  MOVWF  45
00F6:  MOVF   44,F
00F7:  BTFSS  03.2
00F8:  GOTO   0FE
00F9:  MOVF   45,F
00FA:  BTFSS  03.2
00FB:  GOTO   0FE
00FC:  MOVLW  02
00FD:  XORWF  39,F
.................... 
....................    // 1 GIAY (400 ticks * 2.5ms = 1000ms)
....................    if(COUNT_TICK >= 400){
00FE:  MOVF   35,W
00FF:  SUBLW  00
0100:  BTFSC  03.0
0101:  GOTO   15D
0102:  XORLW  FF
0103:  BTFSS  03.2
0104:  GOTO   109
0105:  MOVF   34,W
0106:  SUBLW  8F
0107:  BTFSC  03.0
0108:  GOTO   15D
....................      COUNT_TICK=0; 
0109:  CLRF   35
010A:  CLRF   34
....................      update_time_flag = 1; 
010B:  BSF    39.0
....................      
....................      if(mode != 2){ 
010C:  MOVF   36,W
010D:  SUBLW  02
010E:  BTFSC  03.2
010F:  GOTO   15D
....................          if(COUNTDOWN > 0) COUNTDOWN--;  
0110:  MOVF   37,F
0111:  BTFSS  03.2
0112:  DECF   37,F
....................          if(COUNTDOWN2 > 0) COUNTDOWN2--;   
0113:  MOVF   38,F
0114:  BTFSS  03.2
0115:  DECF   38,F
....................          
....................          // Logic chuyen mau
....................          if(COUNTDOWN == 0){
0116:  MOVF   37,F
0117:  BTFSS  03.2
0118:  GOTO   137
....................             I1++; if(I1 > 2) I1 = 0;
0119:  INCF   32,F
011A:  MOVF   32,W
011B:  SUBLW  02
011C:  BTFSS  03.0
011D:  CLRF   32
....................             if(I1==0) COUNTDOWN = (mode==1)? GREEN2 : GREEN;
011E:  MOVF   32,F
011F:  BTFSS  03.2
0120:  GOTO   128
0121:  DECFSZ 36,W
0122:  GOTO   125
0123:  MOVLW  39
0124:  GOTO   126
0125:  MOVLW  14
0126:  MOVWF  37
0127:  GOTO   137
....................             else if(I1==1) COUNTDOWN = (mode==1)? YELLOW2 : YELLOW;
0128:  DECFSZ 32,W
0129:  GOTO   131
012A:  DECFSZ 36,W
012B:  GOTO   12E
012C:  MOVLW  03
012D:  GOTO   12F
012E:  MOVLW  03
012F:  MOVWF  37
0130:  GOTO   137
....................             else COUNTDOWN = (mode==1)? RED2 : RED;
0131:  DECFSZ 36,W
0132:  GOTO   135
0133:  MOVLW  3C
0134:  GOTO   136
0135:  MOVLW  17
0136:  MOVWF  37
....................          }
....................          
....................          if(COUNTDOWN2 == 0){
0137:  MOVF   38,F
0138:  BTFSS  03.2
0139:  GOTO   15D
....................             I2++; if(I2 > 5) I2 = 3;
013A:  INCF   33,F
013B:  MOVF   33,W
013C:  SUBLW  05
013D:  BTFSC  03.0
013E:  GOTO   141
013F:  MOVLW  03
0140:  MOVWF  33
....................             if(I2==3) COUNTDOWN2 = (mode==1)? GREEN2 : GREEN;
0141:  MOVF   33,W
0142:  SUBLW  03
0143:  BTFSS  03.2
0144:  GOTO   14C
0145:  DECFSZ 36,W
0146:  GOTO   149
0147:  MOVLW  39
0148:  GOTO   14A
0149:  MOVLW  14
014A:  MOVWF  38
014B:  GOTO   15D
....................             else if(I2==4) COUNTDOWN2 = (mode==1)? YELLOW2 : YELLOW;
014C:  MOVF   33,W
014D:  SUBLW  04
014E:  BTFSS  03.2
014F:  GOTO   157
0150:  DECFSZ 36,W
0151:  GOTO   154
0152:  MOVLW  03
0153:  GOTO   155
0154:  MOVLW  03
0155:  MOVWF  38
0156:  GOTO   15D
....................             else COUNTDOWN2 = (mode==1)? RED2 : RED;
0157:  DECFSZ 36,W
0158:  GOTO   15B
0159:  MOVLW  3C
015A:  GOTO   15C
015B:  MOVLW  17
015C:  MOVWF  38
....................          }
....................      }
....................    }
....................    CAPNHAT_DEN();
.................... }
.................... 
.................... // XU LY NUT BAM
*
01AD:  BCF    0C.0
01AE:  BCF    0A.3
01AF:  BCF    0A.4
01B0:  GOTO   021
.................... #INT_RB
.................... VOID XULY_NUTBAM(){   
....................    if(!input(PIN_B7)){ 
*
01B9:  BSF    03.5
01BA:  BSF    06.7
01BB:  BCF    03.5
01BC:  BTFSC  06.7
01BD:  GOTO   1CA
....................       che_do_tu_dong = !che_do_tu_dong; 
01BE:  MOVLW  04
01BF:  XORWF  39,F
....................       if(!che_do_tu_dong) { mode=0; I1=0; I2=5; COUNTDOWN=GREEN; COUNTDOWN2=RED; }
01C0:  BTFSC  39.2
01C1:  GOTO   1CA
01C2:  CLRF   36
01C3:  CLRF   32
01C4:  MOVLW  05
01C5:  MOVWF  33
01C6:  MOVLW  14
01C7:  MOVWF  37
01C8:  MOVLW  17
01C9:  MOVWF  38
....................    }
....................    if(che_do_tu_dong == 0) {
01CA:  BTFSC  39.2
01CB:  GOTO   1EE
....................        if(!input(PIN_B4)){ mode=0; I1=0; I2=5; COUNTDOWN=GREEN; COUNTDOWN2=RED; }
01CC:  BSF    03.5
01CD:  BSF    06.4
01CE:  BCF    03.5
01CF:  BTFSC  06.4
01D0:  GOTO   1D9
01D1:  CLRF   36
01D2:  CLRF   32
01D3:  MOVLW  05
01D4:  MOVWF  33
01D5:  MOVLW  14
01D6:  MOVWF  37
01D7:  MOVLW  17
01D8:  MOVWF  38
....................        if(!input(PIN_B5)){ mode=1; I1=0; I2=5; COUNTDOWN=GREEN2; COUNTDOWN2=RED2; }
01D9:  BSF    03.5
01DA:  BSF    06.5
01DB:  BCF    03.5
01DC:  BTFSC  06.5
01DD:  GOTO   1E7
01DE:  MOVLW  01
01DF:  MOVWF  36
01E0:  CLRF   32
01E1:  MOVLW  05
01E2:  MOVWF  33
01E3:  MOVLW  39
01E4:  MOVWF  37
01E5:  MOVLW  3C
01E6:  MOVWF  38
....................        if(!input(PIN_B6)){ mode=2; }
01E7:  BSF    03.5
01E8:  BSF    06.6
01E9:  BCF    03.5
01EA:  BTFSC  06.6
01EB:  GOTO   1EE
01EC:  MOVLW  02
01ED:  MOVWF  36
....................    }
....................    clear_interrupt(INT_RB); 
01EE:  MOVF   06,W
01EF:  NOP
01F0:  BCF    0B.0
01F1:  BCF    0B.0
01F2:  BCF    0A.3
01F3:  BCF    0A.4
01F4:  GOTO   021
.................... }   
.................... 
.................... void main(){
*
0286:  MOVF   03,W
0287:  ANDLW  1F
0288:  MOVWF  03
0289:  MOVLW  FF
028A:  MOVWF  27
028B:  BSF    27.3
028C:  MOVF   27,W
028D:  BSF    03.5
028E:  MOVWF  07
028F:  BCF    03.5
0290:  BSF    27.4
0291:  MOVF   27,W
0292:  BSF    03.5
0293:  MOVWF  07
0294:  MOVLW  0C
0295:  MOVWF  13
0296:  MOVLW  28
0297:  BCF    03.5
0298:  MOVWF  14
0299:  BSF    03.5
029A:  BCF    14.7
029B:  BCF    14.6
029C:  BCF    03.5
029D:  CLRF   32
029E:  CLRF   33
029F:  CLRF   35
02A0:  CLRF   34
02A1:  CLRF   36
02A2:  CLRF   37
02A3:  CLRF   38
02A4:  BCF    39.0
02A5:  BCF    39.1
02A6:  CLRF   3A
02A7:  BSF    39.2
02A8:  BSF    03.5
02A9:  BSF    1F.0
02AA:  BSF    1F.1
02AB:  BSF    1F.2
02AC:  BCF    1F.3
02AD:  MOVLW  07
02AE:  MOVWF  1C
02AF:  BCF    03.7
....................    setup_adc_ports(NO_ANALOGS); // Quan trong
*
02C5:  BSF    03.5
02C6:  BSF    1F.0
02C7:  BSF    1F.1
02C8:  BSF    1F.2
02C9:  BCF    1F.3
....................    
....................    set_tris_a(0x00);
02CA:  MOVLW  00
02CB:  MOVWF  05
....................    set_tris_b(0xF0); 
02CC:  MOVLW  F0
02CD:  MOVWF  06
....................    set_tris_d(0x00);
02CE:  MOVLW  00
02CF:  MOVWF  08
....................    set_tris_e(0x00);
02D0:  BCF    09.0
02D1:  BCF    09.1
02D2:  BCF    09.2
....................    
....................    OUTPUT_A(0); OUTPUT_D(0); OUTPUT_E(0); OUTPUT_B(0);
02D3:  CLRF   05
02D4:  BCF    03.5
02D5:  CLRF   05
02D6:  BSF    03.5
02D7:  CLRF   08
02D8:  BCF    03.5
02D9:  CLRF   08
02DA:  BSF    03.5
02DB:  BCF    09.0
02DC:  BCF    09.1
02DD:  BCF    09.2
02DE:  BCF    03.5
02DF:  CLRF   09
02E0:  BSF    03.5
02E1:  CLRF   06
02E2:  BCF    03.5
02E3:  CLRF   06
.................... 
....................    mode = 0; I1 = 0; I2 = 5;
02E4:  CLRF   36
02E5:  CLRF   32
02E6:  MOVLW  05
02E7:  MOVWF  33
....................    COUNTDOWN = GREEN; COUNTDOWN2 = RED;
02E8:  MOVLW  14
02E9:  MOVWF  37
02EA:  MOVLW  17
02EB:  MOVWF  38
.................... 
....................    // Setup Timer 1 voi bo chia 8
....................    setup_timer_1(T1_INTERNAL | T1_DIV_BY_8); 
02EC:  MOVLW  B5
02ED:  MOVWF  10
....................    set_timer1(64000); 
02EE:  CLRF   0E
02EF:  MOVLW  FA
02F0:  MOVWF  0F
02F1:  CLRF   0E
02F2:  NOP
....................    
....................    enable_interrupts(INT_TIMER1);
02F3:  BSF    03.5
02F4:  BSF    0C.0
....................    enable_interrupts(INT_RB);
02F5:  BCF    03.5
02F6:  BSF    0B.3
....................    enable_interrupts(GLOBAL);
02F7:  MOVLW  C0
02F8:  IORWF  0B,F
....................    
....................    while(true){
....................       if(update_time_flag){
02F9:  BTFSS  39.0
02FA:  GOTO   336
....................          update_time_flag = 0; 
02FB:  BCF    39.0
....................          
....................          if(che_do_tu_dong){
02FC:  BTFSS  39.2
02FD:  GOTO   336
....................              DOC_THOIGIAN(); 
02FE:  GOTO   24A
....................              
....................              if ((rtc_hour >= 6 && rtc_hour < 8) || (rtc_hour >= 16 && rtc_hour < 18)) {
02FF:  MOVF   3D,W
0300:  SUBLW  05
0301:  BTFSC  03.0
0302:  GOTO   307
0303:  MOVF   3D,W
0304:  SUBLW  07
0305:  BTFSC  03.0
0306:  GOTO   30F
0307:  MOVF   3D,W
0308:  SUBLW  0F
0309:  BTFSC  03.0
030A:  GOTO   31C
030B:  MOVF   3D,W
030C:  SUBLW  11
030D:  BTFSS  03.0
030E:  GOTO   31C
....................                 if(mode != 1) { mode = 1; I1=0; I2=5; COUNTDOWN=GREEN2; COUNTDOWN2=RED2; }
030F:  DECFSZ 36,W
0310:  GOTO   312
0311:  GOTO   31B
0312:  MOVLW  01
0313:  MOVWF  36
0314:  CLRF   32
0315:  MOVLW  05
0316:  MOVWF  33
0317:  MOVLW  39
0318:  MOVWF  37
0319:  MOVLW  3C
031A:  MOVWF  38
....................              }
031B:  GOTO   336
....................              else if (rtc_hour >= 22 || rtc_hour < 5) {
031C:  MOVF   3D,W
031D:  SUBLW  15
031E:  BTFSS  03.0
031F:  GOTO   324
0320:  MOVF   3D,W
0321:  SUBLW  04
0322:  BTFSS  03.0
0323:  GOTO   32B
....................                 if(mode != 2) { mode = 2; }
0324:  MOVF   36,W
0325:  SUBLW  02
0326:  BTFSC  03.2
0327:  GOTO   32A
0328:  MOVLW  02
0329:  MOVWF  36
....................              }
032A:  GOTO   336
....................              else {
....................                 if(mode != 0) { mode = 0; I1=0; I2=5; COUNTDOWN=GREEN; COUNTDOWN2=RED; }
032B:  MOVF   36,F
032C:  BTFSC  03.2
032D:  GOTO   336
032E:  CLRF   36
032F:  CLRF   32
0330:  MOVLW  05
0331:  MOVWF  33
0332:  MOVLW  14
0333:  MOVWF  37
0334:  MOVLW  17
0335:  MOVWF  38
....................              }
....................          }
....................       }
0336:  GOTO   2F9
....................    }
.................... }
0337:  SLEEP

Configuration Fuses:
   Word  1: 3F72   HS NOWDT PUT BROWNOUT NOLVP NOCPD NOWRT NODEBUG NOPROTECT
